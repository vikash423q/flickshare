import{g as Y,b as Z,r as i,d as _,u as tt,e as ot,j as o,s as E,f as G,h,i as et,B as nt,k as rt,m as at,l as it,C as st,c as x,I as Q,n as lt}from"./IconButton.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();function ct(t){return Z("MuiButton",t)}const B=Y("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),dt=i.createContext({}),pt=i.createContext(void 0),gt=t=>{const{color:n,disableElevation:r,fullWidth:a,size:s,variant:l,loading:g,loadingPosition:b,classes:z}=t,S={root:["root",g&&"loading",l,`${l}${h(n)}`,`size${h(s)}`,`${l}Size${h(s)}`,`color${h(n)}`,r&&"disableElevation",a&&"fullWidth",g&&`loadingPosition${h(b)}`],startIcon:["icon","startIcon",`iconSize${h(s)}`],endIcon:["icon","endIcon",`iconSize${h(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},f=et(S,ct,z);return{...z,...f}},X=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ut=E(nt,{shouldForwardProp:t=>rt(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:r}=t;return[n.root,n[r.variant],n[`${r.variant}${h(r.color)}`],n[`size${h(r.size)}`],n[`${r.variant}Size${h(r.size)}`],r.color==="inherit"&&n.colorInherit,r.disableElevation&&n.disableElevation,r.fullWidth&&n.fullWidth,r.loading&&n.loading]}})(at(({theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],r=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${B.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${B.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${B.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${B.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(it()).map(([a])=>({props:{color:a},style:{"--variant-textColor":(t.vars||t).palette[a].main,"--variant-outlinedColor":(t.vars||t).palette[a].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[a].main,.5),"--variant-containedColor":(t.vars||t).palette[a].contrastText,"--variant-containedBg":(t.vars||t).palette[a].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[a].dark,"--variant-textBg":t.alpha((t.vars||t).palette[a].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[a].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[a].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${B.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${B.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${B.loading}`]:{color:"transparent"}}}]}})),xt=E("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,n)=>{const{ownerState:r}=t;return[n.startIcon,r.loading&&n.startIconLoadingStart,n[`iconSize${h(r.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...X]})),ht=E("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,n)=>{const{ownerState:r}=t;return[n.endIcon,r.loading&&n.endIconLoadingEnd,n[`iconSize${h(r.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...X]})),bt=E("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),q=E("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),W=i.forwardRef(function(n,r){const a=i.useContext(dt),s=i.useContext(pt),l=_(a,n),g=tt({props:l,name:"MuiButton"}),{children:b,color:z="primary",component:S="button",className:f,disabled:u=!1,disableElevation:c=!1,disableFocusRipple:y=!1,endIcon:j,focusVisibleClassName:C,fullWidth:A=!1,id:H,loading:w=null,loadingIndicator:v,loadingPosition:p="center",size:D="medium",startIcon:M,type:P,variant:F="text",...O}=g,T=ot(H),V=v??o.jsx(st,{"aria-labelledby":T,color:"inherit",size:16}),I={...g,color:z,component:S,disabled:u,disableElevation:c,disableFocusRipple:y,fullWidth:A,loading:w,loadingIndicator:V,loadingPosition:p,size:D,type:P,variant:F},m=gt(I),$=(M||w&&p==="start")&&o.jsx(xt,{className:m.startIcon,ownerState:I,children:M||o.jsx(q,{className:m.loadingIconPlaceholder,ownerState:I})}),R=(j||w&&p==="end")&&o.jsx(ht,{className:m.endIcon,ownerState:I,children:j||o.jsx(q,{className:m.loadingIconPlaceholder,ownerState:I})}),L=s||"",N=typeof w=="boolean"?o.jsx("span",{className:m.loadingWrapper,style:{display:"contents"},children:w&&o.jsx(bt,{className:m.loadingIndicator,ownerState:I,children:V})}):null;return o.jsxs(ut,{ownerState:I,className:G(a.className,m.root,f,L),component:S,disabled:u||w,focusRipple:!y,focusVisibleClassName:G(m.focusVisible,C),ref:r,type:P,id:w?T:H,...O,classes:m,children:[$,p!=="end"&&N,b,p==="end"&&N,R]})}),ft=x(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),yt=x([o.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),o.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),vt=x(o.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"})),K=x(o.jsx("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3"})),mt=x(o.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),St=x(o.jsx("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"})),jt=x(o.jsx("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"})),wt=x(o.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),zt=t=>{const[n,r]=i.useState(null),[a,s]=i.useState(null),[l,g]=i.useState(null),[b,z]=i.useState({}),[S,f]=i.useState(!1),[u,c]=i.useState(null),[y,j]=i.useState(""),[C,A]=i.useState(""),[H,w]=i.useState(""),[v,p]=i.useState(!1),[D,M]=i.useState(!1),P=i.useRef(null),F=()=>{chrome.storage.local.get(["userId","token","backendUrl","name","roomId"],e=>{e.userId&&r(e.userId),e.token&&s(e.token),e.name&&w(e.name),e.backendUrl?g(e.backendUrl):(r(null),t.setViewName("start"))})},O=()=>{fetch(`${l}/api/user/info`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}).then(e=>e.json()).then(e=>{z(e),f(e.admin),w(e.name),chrome.storage.local.set({name:e.name})}).catch(e=>{console.error("Error fetching user info:",e),r(null)})};i.useEffect(()=>{const e=async()=>{const{roomId:k}=await chrome.storage.local.get(["roomId"]);j(k||"")};e();const d=setInterval(e,1e3);return()=>clearInterval(d)},[]),i.useEffect(()=>{F(),chrome.tabs.query({active:!0,currentWindow:!0},e=>{const d=e[0];c(d)})},[]),i.useEffect(()=>{n&&O()},[n]),i.useEffect(()=>{b.admin?f(!0):f(!1)},[b]);const T=async()=>{console.log("Starting party..."),p(!0);try{const e=await fetch(`${l}/api/rooms`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({url:u.url})}),d=await e.json();if(e.status===200){console.log("Party started successfully:",d);const k=d.roomId;await chrome.storage.local.set({roomId:k}),R(),setTimeout(()=>window.close(),200)}else console.error("Failed to start party: "+d.message)}catch(e){console.error("Error starting party:",e)}finally{p(!1)}},V=async e=>{if(e){console.log("Joining party..."),p(!0);try{const d=await fetch(`${l}/api/rooms/${e}/info`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}),k=await d.json();d.status===200&&(console.log("Party joined successfully:",k.link),await chrome.storage.local.set({roomId:e}),await chrome.tabs.update(u.id,{url:k.link}),await chrome.runtime.sendMessage({action:"joinParty",tabId:u.id}))}catch(d){console.error("Error joining party:",d)}finally{p(!1)}}},I=async()=>{if(y)try{const e=await fetch(`${l}/api/rooms/${y}/info`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}),d=await e.json();e.status===200&&d.link&&chrome.tabs.query({},async k=>{const U=k.find(J=>J.url&&J.url.includes(d.link));U?(await chrome.tabs.update(U.id,{active:!0}),await chrome.windows.update(U.windowId,{focused:!0}),R()):(chrome.tabs.create({url:d.link,active:!0}),R()),window.close()})}catch(e){console.error("Error getting party info:",e)}},m=async()=>{console.log("Leaving party..."),P.current&&P.current.readyState===WebSocket.OPEN&&(P.current.send(JSON.stringify({type:"leave",roomId:y,token:a})),P.current.close()),chrome.storage.local.remove(["roomId"]).then(()=>{p(!0),j(""),u&&L()})},$=async e=>{if(!u)return!1;p(!0);try{await chrome.scripting.executeScript({target:{tabId:u.id},files:["assets/index.jsx-loader.js"]}),await new Promise(d=>setTimeout(d,100)),await chrome.tabs.sendMessage(u.id,{action:e},d=>{chrome.runtime.lastError?console.error("Error:",chrome.runtime.lastError):M(d?.isActive||!1),p(!1)})}catch(d){console.error("Error injecting script:",d),p(!1)}},R=()=>{$("openPanel").then(()=>{window.close()})},L=()=>$("closePanel"),N=()=>{chrome.storage.local.remove(["userId","token","roomId"],()=>{t.setViewName("setup"),u&&L()})};return o.jsxs("div",{style:{minHeight:"400px",background:"linear-gradient(135deg, #db6c33 0%, #5a3a32 100%)",position:"relative",display:"flex",flexDirection:"column"},children:[n&&o.jsxs("div",{style:{padding:"16px 20px",background:"rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[S?o.jsx(yt,{style:{color:"#fbbf24",fontSize:"24px"}}):o.jsx(ft,{style:{color:"white",fontSize:"24px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{color:"white",fontSize:"14px",fontWeight:"600"},children:H||"User"}),o.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"11px"},children:S?"Administrator":"Member"})]})]}),o.jsx(Q,{onClick:N,style:{color:"white",background:"rgba(255, 255, 255, 0.1)"},title:"Logout",children:o.jsx(vt,{})})]}),o.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"30px 24px"},children:n?y?o.jsxs("div",{style:{width:"100%",maxWidth:"320px"},children:[o.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"24px",marginBottom:"16px",textAlign:"center"},children:[o.jsx("div",{style:{width:"60px",height:"60px",background:"rgba(16, 185, 129, 0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",border:"3px solid rgba(16, 185, 129, 0.5)"},children:o.jsx(K,{style:{fontSize:"32px",color:"#10b981"}})}),o.jsx("h3",{style:{color:"white",fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0"},children:"Party Active"}),o.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.2)",padding:"8px 16px",borderRadius:"8px",display:"inline-block",marginBottom:"8px"},children:[o.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"11px",display:"block"},children:"Room ID"}),o.jsx("span",{style:{color:"white",fontSize:"16px",fontWeight:"600",letterSpacing:"1px"},children:y})]})]}),o.jsx(W,{variant:"contained",fullWidth:!0,onClick:I,startIcon:o.jsx(wt,{}),style:{background:"rgba(255, 255, 255, 0.95)",color:"#db6c33",fontSize:"15px",fontWeight:"600",padding:"12px",borderRadius:"10px",textTransform:"none",marginBottom:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:"Go to Party"}),o.jsx(W,{variant:"outlined",fullWidth:!0,onClick:m,startIcon:o.jsx(jt,{}),disabled:v,style:{background:"rgba(239, 68, 68, 0.1)",border:"2px solid rgba(239, 68, 68, 0.5)",color:"white",fontSize:"15px",fontWeight:"600",padding:"12px",borderRadius:"10px",textTransform:"none"},children:"Leave Party"})]}):o.jsxs("div",{style:{width:"100%",maxWidth:"320px"},children:[o.jsx("h2",{style:{color:"white",fontSize:"20px",fontWeight:"600",textAlign:"center",margin:"0 0 24px 0"},children:"Start Watching Together"}),o.jsx(W,{variant:"contained",fullWidth:!0,onClick:T,disabled:v,startIcon:o.jsx(mt,{}),style:{background:v?"rgba(255, 255, 255, 0.5)":"white",color:v?"rgba(102, 126, 234, 0.5)":"#db6c33",fontSize:"15px",fontWeight:"600",padding:"14px",borderRadius:"12px",textTransform:"none",marginBottom:"32px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:v?"Starting...":"Start New Party"}),o.jsx("div",{style:{width:"100%",height:"1px",background:"rgba(255, 255, 255, 0.2)",marginBottom:"32px",position:"relative"},children:o.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"linear-gradient(135deg, #db6c33 0%, #764ba2 100%)",color:"rgba(255, 255, 255, 0.7)",padding:"4px 16px",fontSize:"12px",fontWeight:"500"},children:"OR"})}),o.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"20px"},children:[o.jsx("label",{style:{display:"block",color:"white",fontSize:"13px",fontWeight:"500",marginBottom:"10px",opacity:.9},children:"Join Existing Party"}),o.jsx("input",{type:"text",value:C,onChange:e=>A(e.target.value),placeholder:"Enter Room ID",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",marginBottom:"12px",transition:"all 0.2s"},onFocus:e=>{e.target.style.background="rgba(255, 255, 255, 0.25)",e.target.style.borderColor="white"},onBlur:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)",e.target.style.borderColor="rgba(255, 255, 255, 0.3)"}}),o.jsx(W,{variant:"contained",fullWidth:!0,onClick:()=>V(C),disabled:!C.trim()||v,startIcon:o.jsx(St,{}),style:{background:!C.trim()||v?"rgba(255, 255, 255, 0.3)":"rgba(255, 255, 255, 0.9)",color:!C.trim()||v?"rgba(102, 126, 234, 0.5)":"#db6c33",fontSize:"15px",fontWeight:"600",padding:"12px",borderRadius:"8px",textTransform:"none",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:v?"Joining...":"Join Party"})]})]}):o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx(K,{style:{fontSize:"64px",color:"white",marginBottom:"20px",opacity:.9}}),o.jsx("h2",{style:{color:"white",fontSize:"24px",fontWeight:"600",margin:"0 0 12px 0"},children:"Welcome to FlickShare"}),o.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"14px",marginBottom:"24px"},children:"Watch videos together with friends"}),o.jsx(W,{variant:"contained",size:"large",onClick:()=>t.setViewName("setup"),style:{background:"white",color:"#db6c33",fontSize:"15px",fontWeight:"600",padding:"12px 32px",borderRadius:"25px",textTransform:"none",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:"Setup FlickShare"})]})}),o.jsx("p",{className:"version",style:{color:"white"},children:"FlickShare v1.0.0"})]})},It=x(o.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),kt=x(o.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),Ct=x(o.jsx("path",{d:"M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5zm2.5-.5h1.5V15H10v-4.5h1.5V9H7zm5.5 0H14V15h1.5v-4.5H17V9h-4.5zm9-1.5H18v6h1.5v-2h2c.8 0 1.5-.7 1.5-1.5v-1c0-.8-.7-1.5-1.5-1.5m0 2.5h-2v-1h2z"})),Pt=x(o.jsx("path",{d:"M21 10h-8.35C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H13l2 2 2-2 2 2 4-4.04zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3"})),Bt=x(o.jsx("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}));function Wt(t){const[n,r]=i.useState(!0),[a,s]=i.useState("flickshare.vikashgaurav.com"),[l,g]=i.useState("supersecrettoken123"),[b,z]=i.useState(!1),[S,f]=i.useState(""),u=async()=>{z(!0),f("");try{const c=n?"https":"http",y=await fetch(`${c}://${a}/api/user/authenticate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:l})}),j=await y.json();y.status===200?(chrome.storage.local.set({backendUrl:`${c}://${a}`,userId:j.userId,name:j.name,token:j.token}),t.setViewName("start")):f(j.message||"Authentication failed")}catch(c){console.error(c),f("Failed to connect to server. Please check your URL.")}finally{z(!1)}};return o.jsxs("div",{style:{minHeight:"400px",minWidth:"300px",background:"linear-gradient(135deg, #db6c33 0%, #5a3a32 100%)",position:"relative",display:"flex",flexDirection:"column"},children:[o.jsx("div",{style:{position:"absolute",top:"12px",left:"12px",zIndex:10},children:o.jsx(Q,{onClick:()=>t.setViewName("start"),style:{background:"rgba(255, 255, 255, 0.2)",color:"white"},children:o.jsx(It,{})})}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"30px 20px 20px"},children:[o.jsxs("div",{style:{marginBottom:"20px",textAlign:"center"},children:[o.jsx("h2",{style:{color:"white",fontSize:"28px",fontWeight:"600",margin:0,marginBottom:"8px"},children:"ðŸŽ¬ FlickShare"}),o.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"14px",margin:0},children:"Connect to your server"})]}),o.jsxs("div",{style:{width:"100%",maxWidth:"320px",background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",color:"white",fontSize:"12px",fontWeight:"500",marginBottom:"8px",opacity:.9},children:"Protocol"}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsxs("button",{onClick:()=>r(!0),style:{flex:1,padding:"10px",background:n?"rgba(255, 255, 255, 0.3)":"rgba(255, 255, 255, 0.1)",border:n?"2px solid white":"2px solid transparent",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s"},children:[o.jsx(kt,{style:{fontSize:"18px"}}),"HTTPS"]}),o.jsxs("button",{onClick:()=>r(!1),style:{flex:1,padding:"10px",background:n?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.3)",border:n?"2px solid transparent":"2px solid white",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s"},children:[o.jsx(Ct,{style:{fontSize:"18px"}}),"HTTP"]})]})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("label",{style:{display:"block",color:"white",fontSize:"12px",fontWeight:"500",marginBottom:"8px",opacity:.9},children:[o.jsx(Bt,{style:{fontSize:"14px",verticalAlign:"middle",marginRight:"4px"}}),"Server URL"]}),o.jsx("input",{type:"text",value:a,onChange:c=>s(c.target.value),placeholder:"example.com",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",transition:"all 0.2s"},onFocus:c=>{c.target.style.background="rgba(255, 255, 255, 0.25)",c.target.style.borderColor="white"},onBlur:c=>{c.target.style.background="rgba(255, 255, 255, 0.2)",c.target.style.borderColor="rgba(255, 255, 255, 0.3)"}})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsxs("label",{style:{display:"block",color:"white",fontSize:"12px",fontWeight:"500",marginBottom:"8px",opacity:.9},children:[o.jsx(Pt,{style:{fontSize:"14px",verticalAlign:"middle",marginRight:"4px"}}),"Authentication Token"]}),o.jsx("input",{type:"password",value:l,onChange:c=>g(c.target.value),placeholder:"Enter your token",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",color:"white",fontSize:"14px",outline:"none",boxSizing:"border-box",transition:"all 0.2s"},onFocus:c=>{c.target.style.background="rgba(255, 255, 255, 0.25)",c.target.style.borderColor="white"},onBlur:c=>{c.target.style.background="rgba(255, 255, 255, 0.2)",c.target.style.borderColor="rgba(255, 255, 255, 0.3)"}})]}),S&&o.jsx("div",{style:{padding:"10px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"8px",color:"white",fontSize:"13px",marginBottom:"20px",textAlign:"center"},children:S}),o.jsx(W,{onClick:u,disabled:b||!a||!l,variant:"contained",fullWidth:!0,style:{padding:"12px",background:b?"rgba(255, 255, 255, 0.3)":"white",color:b?"rgba(102, 126, 234, 0.5)":"#db6c33",fontSize:"15px",fontWeight:"600",borderRadius:"8px",textTransform:"none",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.2s"},children:b?"Connecting...":"Connect to Server"})]}),o.jsx("p",{className:"version",style:{color:"white"},children:"FlickShare v1.0.0"})]})]})}const Rt=()=>{const[t,n]=i.useState("start"),r=()=>{switch(t){case"setup":return o.jsx(Wt,{setViewName:n});case"start":return o.jsx(zt,{setViewName:n});case"user":return o.jsx("div",{});case"settings":return o.jsx("div",{});case"help":return o.jsx("div",{});default:return o.jsx("h1",{children:"No view match"})}};return o.jsx(o.Fragment,{children:r()})};function Et(){return o.jsx(Rt,{})}lt.createRoot(document.getElementById("root")).render(o.jsx(i.StrictMode,{children:o.jsx(Et,{})}));
