import{c as M,j as t,r as o,I as U,R as pe,a as xe}from"./IconButton.js";import ue from"./video.js.js";const ge=M([t.jsx("path",{d:"M5 18.08V19h.92l9.06-9.06-.92-.92z",opacity:".3"},"0"),t.jsx("path",{d:"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75zM3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM5.92 19H5v-.92l9.06-9.06.92.92z"},"1")]),fe=M(t.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),ye=M(t.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),he=M(t.jsx("path",{d:"M8 5v14l11-7z"})),me=M(t.jsx("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"})),be=({theme:r,name:c,backendUrl:f,token:T,setName:P,playerState:d})=>{const[h,m]=o.useState(""),[C,b]=o.useState(!1),[S,x]=o.useState(!1),[k,a]=o.useState(""),[D,z]=o.useState(0);o.useEffect(()=>{z(d.currentTime);const l=setInterval(()=>{d?.isPlaying&&z(i=>i+1)},1e3);return()=>clearInterval(l)},[d]);const $=async()=>{if(!h.trim()){a("Please enter a name");return}x(!0),a("");try{(await fetch(`${f}/api/user/info`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({name:h})})).ok?(a("Name updated successfully!"),P(h),m(""),setTimeout(()=>{b(!1),a("")},1500)):a("Failed to update name")}catch(l){a("Error updating name"),console.error("Error:",l)}finally{x(!1)}},u=()=>{b(!1),m(""),a("")},E=()=>{b(!0),m(c||"")},y=l=>{if(!l||l<0)return"0:00";const i=Math.floor(l/60),N=Math.floor(l%60);return`${i}:${N.toString().padStart(2,"0")}`},W=()=>!d?.duration||d.duration<=0?0:d.currentTime/d.duration*100;return t.jsxs("div",{style:{padding:"20px"},children:[t.jsxs("div",{style:{padding:"18px",background:`linear-gradient(135deg, ${r.systemBg} 0%, ${r.systemBg}dd 100%)`,borderRadius:"10px",marginBottom:"25px",border:`1px solid ${r.systemBg}`,overflow:"hidden"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:C?"15px":"0"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"bold",color:"white",flexShrink:0},children:c?.charAt(0).toUpperCase()||"?"}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"12px",color:r.systemText,marginBottom:"4px",opacity:.7},children:"Current User"}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:r.text},children:c||"Anonymous"})]}),!C&&t.jsx("div",{children:t.jsx(U,{title:"Edit Name",onClick:E,style:{color:r.text,fontSize:"24px"},children:t.jsx(ge,{})})})]}),C&&t.jsxs("div",{style:{paddingTop:"15px",borderTop:`1px solid ${r.systemBg}88`,animation:"slideDown 0.2s ease-out"},children:[t.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[t.jsx("input",{type:"text",value:h,onChange:l=>m(l.target.value),placeholder:"Enter new name",autoFocus:!0,disabled:S,style:{flex:1,padding:"10px 12px",background:r.background||"#ffffff",border:`1px solid ${r.systemBg}`,borderRadius:"8px",fontSize:"14px",boxSizing:"border-box",outline:"none"},onKeyPress:l=>{l.key==="Enter"&&!S&&$()}}),t.jsx(U,{onClick:$,disabled:S,title:"Save",style:{background:"#10b981",color:"white",width:"40px",height:"40px",opacity:S?.5:1},children:t.jsx(fe,{})}),t.jsx(U,{onClick:u,disabled:S,title:"Cancel",style:{background:"#ef4444",color:"white",width:"40px",height:"40px",opacity:S?.5:1},children:t.jsx(ye,{})})]}),k&&t.jsx("div",{style:{padding:"8px 12px",background:k.includes("success")?"#10b98120":"#ef444420",color:k.includes("success")?"#10b981":"#ef4444",borderRadius:"6px",fontSize:"13px"},children:k})]})]}),t.jsxs("div",{style:{padding:"18px",background:`linear-gradient(135deg, ${r.systemBg} 0%, ${r.systemBg}dd 100%)`,borderRadius:"10px",marginBottom:"25px",border:`1px solid ${r.systemBg}`},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:d?.isPlaying?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",flexShrink:0,animation:d?.isPlaying?"pulse 2s ease-in-out infinite":"none"},children:d?.isPlaying?t.jsx(he,{style:{fontSize:"24px"}}):t.jsx(me,{style:{fontSize:"24px"}})}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:"12px",color:r.systemText,marginBottom:"4px",opacity:.7},children:"Room Player"}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:r.text},children:d?.isPlaying?"Playing":"Paused"})]}),t.jsx("div",{style:{fontSize:"14px",fontWeight:"500",color:r.text},children:y(D)})]}),t.jsx("div",{style:{width:"100%",height:"6px",background:r.background||"#e5e7eb",borderRadius:"3px",overflow:"hidden",position:"relative"},children:t.jsx("div",{style:{height:"100%",width:`${W()}%`,background:d?.isPlaying?"linear-gradient(90deg, #10b981 0%, #059669 100%)":"linear-gradient(90deg, #f59e0b 0%, #d97706 100%)",transition:"width 0.3s ease",borderRadius:"3px"}})}),d?.updatedBy&&t.jsxs("div",{style:{marginTop:"10px",fontSize:"11px",color:r.systemText,opacity:.6,textAlign:"right"},children:["Last updated by ",d.updatedBy]})]}),t.jsx("style",{children:`
                @keyframes pulse {
                    0%, 100% {
                        transform: scale(1);
                        opacity: 1;
                    }
                    50% {
                        transform: scale(1.05);
                        opacity: 0.9;
                    }
                }
            `}),t.jsx("h3",{style:{fontSize:"16px",marginBottom:"15px",color:r.text},children:"Video Call"}),t.jsxs("div",{style:{padding:"15px",background:r.systemBg,borderRadius:"8px",fontSize:"13px",color:r.systemText,marginBottom:"15px"},children:[t.jsx("strong",{children:"ðŸš§ Coming Soon"}),t.jsx("br",{}),"Video call feature will allow everyone in the room to watch at the same time."]}),t.jsx("button",{style:{width:"100%",padding:"12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",marginBottom:"10px"},children:"ðŸŽ¬ Sync Play/Pause"}),t.jsx("button",{style:{width:"100%",padding:"12px",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"â° Sync Timestamp"})]})},Se=({onClose:r})=>{const[c,f]=o.useState(!0),[T,P]=o.useState([]),[d,h]=o.useState(""),[m,C]=o.useState(""),[b,S]=o.useState(null),[x,k]=o.useState(""),[a,D]=o.useState(""),[z,$]=o.useState(""),[u,E]=o.useState(!1),[y,W]=o.useState("chat"),l=o.useRef(null),[i,N]=o.useState(!0),[A,F]=o.useState(""),[X,J]=o.useState(!1),[Z,ee]=o.useState({});o.useEffect(()=>{localStorage.setItem("sidepanel_darkmode",i)},[i]);const n={bg:i?"#1a1a1a":"#ffffff",bgSecondary:i?"#2d2d2d":"#f9fafb",bgTertiary:i?"#3d3d3d":"#fafafa",text:i?"#e5e5e5":"#1f2937",textSecondary:i?"#a0a0a0":"#6b7280",textMuted:i?"#707070":"#9ca3af",border:i?"#404040":"#e5e7eb",messageBg:i?"#2a2a2a":"white",systemBg:i?"#3d2a1f":"#fef3c7",systemText:i?"#fbbf24":"#92400e",inputBg:i?"#2d2d2d":"white",inputBorder:i?"#404040":"#d1d5db",gradientStart:i?"#db6c33":"#ff752e",gradientEnd:i?"#5a3a32":"#d4846f"},p=o.useRef(null),B=o.useRef(null),_=o.useRef(null);o.useEffect(()=>{chrome.storage.local.set({darkMode:i})},[i]),o.useEffect(()=>{chrome.storage.local.get(["userId","roomId","name","token","backendUrl","darkMode"],e=>{e.userId&&D(e.userId),e.roomId&&k(e.roomId),e.name&&C(e.name),e.token&&S(e.token),e.backendUrl&&$(e.backendUrl)})},[]),o.useEffect(()=>{a&&chrome.storage.local.set({userId:a})},[a]),o.useEffect(()=>{x&&chrome.storage.local.set({roomId:x},()=>{H(),F(x)})},[x]);const te=e=>e.replace(/^http(s?):\/\//,"ws$1://");o.useEffect(()=>{if(u){B.current=ue();const e=B.current.subscribe(s=>{if(X){console.log("blocking event due to cooldown");return}p.current.send(JSON.stringify({actionType:"media",type:"video_state",isPlaying:s.isPlaying,duration:s.duration,currentTime:s.currentTime,roomId:x,token:b}))});return()=>{e(),B.current=null}}},[u]);const H=()=>{p.current||(p.current=new WebSocket(te(z)),p.current.onopen=()=>{E(!0),p.current.send(JSON.stringify({type:"join",roomId:x,token:b})),v(`Connected to room: ${x}`),l.current=setInterval(()=>{p.current?.readyState===WebSocket.OPEN&&p.current.send(JSON.stringify({type:"ping",timestamp:Date.now()}))},12e3)},p.current.onmessage=e=>{const s=JSON.parse(e.data);ne(s)},p.current.onclose=()=>{E(!1),v("Disconnected"),Y(),l.current&&clearInterval(l.current)},p.current.onerror=e=>{console.error("WebSocket error:",e),v("Connection error")})},Y=()=>{p.current&&(p.current.close(),p.current=null)},ne=e=>{switch(e.type){case"joined":v("You joined the room");break;case"message":oe(e.userId,e.name,e.content,e.timestamp);break;case"user_joined":e.userId!==a&&v(`${e.name} joined`);break;case"user_left":v(`${e.name} left`);break;case"video_state_update":se(e),ee(e);break;case"pong":const s=Date.now()-JSON.parse(e).timestamp;console.log(`Latency: ${s}ms`);break}},oe=(e,s,j,w)=>{P(O=>[...O,{id:Date.now()+Math.random(),name:s,user:e,content:j,timestamp:w||Date.now(),type:"message"}])},v=e=>{P(s=>[...s,{id:Date.now()+Math.random(),content:e,type:"system",timestamp:Date.now()}])},re=()=>{!d.trim()||!u||(p.current.send(JSON.stringify({roomId:x,token:b,type:"message",content:d})),h(""))},K=e=>{const s=Math.floor(e/3600),j=Math.floor(e%3600/60),w=Math.floor(e%60);return[s,j,w].map(O=>String(O).padStart(2,"0")).join(":")},se=e=>{if(B.current){if(e.userId===a)return;let s=B.current,j=!1,w=e.name;console.log(`Remote player state update from ${e.name} IsPlaying: ${e.isPlaying} CurrentTime: ${e.currentTime}`),s.isLoaded()&&(s.isPlaying()!==e.isPlaying&&(console.log(`Remote toggle play/pause to sync with ${e.name}`),s.togglePlayPause(),j=!0,w+=e.isPlaying?" played video":" paused video"),Math.abs(s.getCurrentTime()-e.currentTime)>1&&(console.log(`Remote seek to sync with ${e.name}`),s.seek(e.currentTime),w+=j?` at ${K(e.currentTime)}`:` moved to ${K(e.currentTime)}`,j=!0)),j&&(J(!0),setTimeout(()=>J(!1),2e3),e.userId!==a&&v(w))}else console.error("Video controller not found!")},ie=e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),re())};o.useEffect(()=>{_.current?.scrollIntoView({behavior:"smooth"})},[T]);const ae=()=>{L(!1),f(!1),Y(),chrome.storage.local.remove(["roomId"]),setTimeout(()=>{r()},300)};o.useEffect(()=>{const e=document.querySelector("video");if(e){const s=e.clientHeight/e.clientWidth;c?(e.style.width=e.clientWidth-240+"px",e.style.height=e.clientWidth*s+"px"):(e.style.width=e.clientWidth+240+"px",e.style.height=e.clientWidth*s+"px")}},[c]),o.useEffect(()=>{},[u]);const[de,q]=o.useState(!1),[G,L]=o.useState(!1),le=()=>{k(A),setTimeout(()=>H(),200)},ce=()=>{navigator.clipboard.writeText(x),q(!0),setTimeout(()=>q(!1),1500)};return t.jsxs("div",{style:{pointerEvents:"all"},children:[t.jsx("button",{onClick:()=>f(!c),onMouseEnter:e=>{e.currentTarget.style.opacity="0.80"},onMouseLeave:e=>{e.currentTarget.style.opacity="0.65"},style:{position:"fixed",right:c?"280px":"0",top:"50%",transform:"translateY(-50%)",width:"24px",height:"50px",background:"rgba(0, 0, 0, 0.6)",border:"none",borderRadius:c?"6px 0 0 6px":"0",cursor:"pointer",zIndex:2147483646,display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255, 255, 255, 0.7)",fontSize:"16px",boxShadow:"none",transition:"right 0.3s ease, opacity 0.2s ease",fontFamily:"system-ui, -apple-system, sans-serif",opacity:"0.8",backdropFilter:"blur(4px)"},children:c?"â€ºâ€º":"â€¹â€¹"}),t.jsxs("div",{style:{position:"fixed",right:c?"0":"-300px",top:"0",width:"280px",height:"100vh",background:n.bg,boxShadow:i?"-2px 0 20px rgba(0,0,0,0.5)":"-2px 0 20px rgba(0,0,0,0.15)",zIndex:2147483647,transition:"right 0.3s ease",display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:n.text},children:[t.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.gradientStart} 0%, ${n.gradientEnd} 100%)`,color:"white",padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Flickshare ðŸŽ¬"}),t.jsxs("p",{style:{margin:"5px 0 0 0",fontSize:"12px",fontWeight:"600",opacity:.9},children:[m," â€¢ ",u?"ðŸŸ¢  Online":"ðŸ”´  Offline"]}),t.jsx("button",{onClick:ce,title:"Click to copy Room ID",style:{background:"none",border:"none",padding:0,cursor:"pointer"},children:t.jsx("p",{style:{margin:"5px 0 0 0",fontSize:"13px",opacity:.9,userSelect:"none",color:"white"},children:de?"Copied! âœ…":`Room: ${x} ðŸ“‹`})})]}),t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>N(!i),title:i?"Switch to Light Mode":"Switch to Dark Mode",style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",width:"32px",height:"32px",borderRadius:"6px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:i?"â˜€ï¸":"ðŸŒ™"}),t.jsx("button",{onClick:ae,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",width:"32px",height:"32px",borderRadius:"6px",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:"âœ•"})]})]}),t.jsxs("div",{style:{display:"flex",borderBottom:`1px solid ${n.border}`,background:n.bgSecondary},children:[t.jsx("button",{onClick:()=>W("chat"),style:{flex:1,padding:"12px",border:"none",background:y==="chat"?n.bg:"transparent",borderBottom:y==="chat"?"2px solid #C17541":"2px solid transparent",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:y==="chat"?"#C17541":n.textSecondary,transition:"all 0.2s"},children:"ðŸ’¬ Chat"}),t.jsx("button",{onClick:()=>W("sync"),style:{flex:1,padding:"12px",border:"none",background:y==="sync"?n.bg:"transparent",borderBottom:y==="sync"?"2px solid #C17541":"2px solid transparent",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:y==="sync"?"#C17541":n.textSecondary,transition:"all 0.2s"},children:"âš™ï¸ More"})]}),t.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:y==="chat"?t.jsxs(t.Fragment,{children:[!u&&t.jsxs("div",{style:{padding:"15px",background:n.bgSecondary,borderBottom:`1px solid ${n.border}`},children:[t.jsxs("div",{style:{marginBottom:"10px"},children:[t.jsx("label",{style:{fontSize:"12px",color:n.textSecondary,display:"block",marginBottom:"5px"},children:"Your Name"}),t.jsx("input",{type:"text",value:m,disabled:!0,style:{width:"100%",padding:"8px",border:`1px solid ${n.inputBorder}`,borderRadius:"6px",fontSize:"14px",background:n.inputBg,color:n.text}})]}),t.jsxs("div",{style:{marginBottom:"10px"},children:[t.jsx("label",{style:{fontSize:"12px",color:n.textSecondary,display:"block",marginBottom:"5px"},children:"Room ID"}),t.jsx("input",{type:"text",value:A,onChange:e=>F(e.target.value),style:{width:"100%",padding:"8px",border:`1px solid ${n.inputBorder}`,borderRadius:"6px",fontSize:"14px",background:n.inputBg,color:n.text}})]}),t.jsx("button",{onClick:le,style:{width:"100%",padding:"10px",background:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Reconnect to Room"})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"15px",background:n.bgTertiary},children:[T.length===0?t.jsx("div",{style:{textAlign:"center",color:n.textMuted,marginTop:"50px",fontSize:"14px"},children:u?"No messages yet. Say hi! ðŸ‘‹":"Connect to start chatting"}):T.map(e=>t.jsxs("div",{style:{marginBottom:"12px",padding:e.type==="system"?"6px 8px":"8px 12px",background:e.type==="system"?n.systemBg:e.user===a?"#667eea":n.messageBg,color:e.type==="system"?n.systemText:e.user===a?"white":n.text,borderRadius:"10px",fontSize:"14px",boxShadow:e.type==="system"?"none":i?"0 1px 3px rgba(0,0,0,0.3)":"0 1px 3px rgba(0,0,0,0.1)",fontStyle:e.type==="system"?"italic":"normal",marginLeft:e.user===a?"32px":"0",marginRight:e.user===a?"0":"32px"},children:[e.type==="message"&&e.user!==a&&t.jsx("div",{style:{fontSize:"11px",fontWeight:"600",marginBottom:"4px",opacity:.8},children:e.name}),t.jsx("div",{style:{color:e.type==="system"?n.systemText:e.user===a?"white":n.text},children:e.content}),e.type==="message"&&t.jsx("div",{style:{fontSize:"9px",marginTop:"4px",opacity:.7},children:new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]},e.id)),t.jsx("div",{ref:_})]}),u&&t.jsxs("div",{style:{padding:"15px",borderTop:`1px solid ${n.border}`,background:n.bg,position:"relative"},children:[G&&t.jsx("div",{style:{position:"absolute",bottom:"70px",left:"10px",background:n.bg,border:`1px solid ${n.border}`,borderRadius:"12px",padding:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"250px",overflowY:"auto",zIndex:1e3,width:"220px"},children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:["ðŸ˜€","ðŸ˜ƒ","ðŸ˜„","ðŸ˜","ðŸ˜†","ðŸ˜…","ðŸ˜‚","ðŸ¤£","ðŸ˜Š","ðŸ˜‡","ðŸ™‚","ðŸ™ƒ","ðŸ˜‰","ðŸ˜Œ","ðŸ˜","ðŸ¥°","ðŸ˜˜","ðŸ˜—","ðŸ˜™","ðŸ˜š","ðŸ˜‹","ðŸ˜›","ðŸ˜","ðŸ˜œ","ðŸ¤ª","ðŸ¤¨","ðŸ§","ðŸ¤“","ðŸ˜Ž","ðŸ¥¸","ðŸ¤©","ðŸ¥³","ðŸ˜","ðŸ˜’","ðŸ˜ž","ðŸ˜”","ðŸ˜Ÿ","ðŸ˜•","ðŸ™","â˜¹ï¸","ðŸ˜£","ðŸ˜–","ðŸ˜«","ðŸ˜©","ðŸ¥º","ðŸ˜¢","ðŸ˜­","ðŸ˜¤","ðŸ˜ ","ðŸ˜¡","ðŸ¤¬","ðŸ¤¯","ðŸ˜³","ðŸ¥µ","ðŸ¥¶","ðŸ˜±","ðŸ˜¨","ðŸ˜°","ðŸ˜¥","ðŸ˜“","ðŸ¤—","ðŸ¤”","ðŸ¤­","ðŸ¤«","ðŸ¤¥","ðŸ˜¶","ðŸ˜","ðŸ˜‘","ðŸ˜¬","ðŸ™„","ðŸ˜¯","ðŸ˜¦","ðŸ˜§","ðŸ˜®","ðŸ˜²","ðŸ¥±","ðŸ˜´","ðŸ¤¤","ðŸ˜ª","ðŸ˜µ","ðŸ¤","ðŸ¥´","ðŸ¤¢","ðŸ¤®","ðŸ¤§","ðŸ˜·","ðŸ¤’","ðŸ¤•","ðŸ¤‘","ðŸ¤ ","ðŸ˜ˆ","ðŸ‘¿","ðŸ‘¹","ðŸ‘º","ðŸ¤¡","ðŸ’©","ðŸ‘»","ðŸ’€","â˜ ï¸","ðŸ‘½","ðŸ‘¾","ðŸ¤–","ðŸŽƒ","ðŸ˜º","ðŸ˜¸","ðŸ˜¹","ðŸ˜»","ðŸ˜¼","ðŸ˜½","ðŸ™€","ðŸ˜¿","ðŸ˜¾","ðŸ‘‹","ðŸ¤š","ðŸ–ï¸","âœ‹","ðŸ––","ðŸ‘Œ","ðŸ¤Œ","ðŸ¤","âœŒï¸","ðŸ¤ž","ðŸ¤Ÿ","ðŸ¤˜","ðŸ¤™","ðŸ‘ˆ","ðŸ‘‰","ðŸ‘†","ðŸ–•","ðŸ‘‡","â˜ï¸","ðŸ‘","ðŸ‘Ž","âœŠ","ðŸ‘Š","ðŸ¤›","ðŸ¤œ","ðŸ‘","ðŸ™Œ","ðŸ‘","ðŸ¤²","ðŸ¤","ðŸ™","âœï¸","ðŸ’…","ðŸ¤³","ðŸ’ª","ðŸ¦¾","ðŸ¦¿","ðŸ¦µ","ðŸ¦¶","ðŸ‘‚","ðŸ¦»","ðŸ‘ƒ","ðŸ§ ","ðŸ«€","ðŸ«","ðŸ¦·","ðŸ¦´","ðŸ‘€","ðŸ‘ï¸","ðŸ‘…","ðŸ‘„","ðŸ’‹","ðŸ©¸"].map(e=>t.jsx("button",{onClick:()=>{h(s=>s+e),L(!1)},style:{fontSize:"20px",background:"transparent",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:s=>s.currentTarget.style.background=n.hover,onMouseLeave:s=>s.currentTarget.style.background="transparent",children:e},e))})}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("button",{onClick:()=>L(!G),style:{padding:"8px 12px",background:n.inputBg,color:n.text,border:`1px solid ${n.inputBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"18px"},children:"ðŸ˜Š"}),t.jsx("input",{type:"text",value:d,onChange:e=>h(e.target.value),onKeyPress:ie,placeholder:"Type a message...",style:{flex:1,padding:"8px 12px",border:`1px solid ${n.inputBorder}`,borderRadius:"8px",fontSize:"14px",outline:"none",background:n.inputBg,color:n.text}})]})]})]}):t.jsx(be,{theme:n,userId:a,name:m,backendUrl:z,token:b,setName:C,playerState:Z})})]})]})};let I=null,g=null,R=!1;const je=300,ke=()=>g||(g=document.createElement("div"),g.id="flickcall-sidepanel-root",g.style.cssText=`
    position: fixed;
    top: 0;
    right: 0;
    width: ${je}px;
    height: 100vh;
    z-index: 2147483647;
    pointer-events: none;
  `,document.body.appendChild(g),g),Q=()=>{if(document.querySelector("#flickcall-sidepanel-root")){R=!0;return}if(I)return;const c=ke();I=pe.createRoot(c),I.render(t.jsx(xe.StrictMode,{children:t.jsx(Se,{onClose:V})}))},V=()=>{I&&(I.unmount(),I=null),g&&(g.remove(),g=null),R=!1};chrome.runtime.onMessage.addListener((r,c,f)=>{if(r.action==="togglePanel")return R?V():Q(),f({isActive:R}),!0;if(r.action==="openPanel")return Q(),f({isActive:!0}),!0;if(r.action==="closePanel")return V(),f({isActive:!1}),!0;if(r.action==="checkPanelStatus")return f({isActive:R}),!0});
